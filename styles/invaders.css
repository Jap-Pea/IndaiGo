/* =========================================================
   INDAIGO — INVADERS PAGE STYLES
   Scope: <body class="game-page invaders">
   Keeps current visual positions; responsive media fixes
   ========================================================= */

/* ---------- Page base ---------- */
.invaders {
  color: #e6e6e6;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
    'Helvetica Neue', Arial, 'Noto Sans';
  min-height: 100svh;
  display: grid;
  align-items: center;
}

.invaders .wrap {
  display: grid;
  gap: 0.75rem;
  align-items: center;
}

/* ---------- How to ---------- */
.invaders .howto {
  margin-top: 10px;
  max-width: 450px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.04),
    rgba(255, 255, 255, 0.02)
  );
  font-size: 18px;
  color: #cfd6e6;
  display: inline-flex;
  gap: 10px;
  flex-wrap: wrap;
}
@media (max-width: 480px) {
  .invaders .howto {
    font-size: 12px;
    gap: 8px;
  }
}

/* ---------- Watermark logo ---------- */
.invaders .logo-watermark {
  position: relative;
  margin-top: -20px; /* preserved placement */
  display: flex;
  justify-content: left;
}
.invaders .logo-watermark img {
  max-width: 500px;
  opacity: 0.1;
  transform: rotate(-15deg);
  pointer-events: none;
  user-select: none;
}
@media (max-width: 480px) {
  .invaders .logo-watermark img {
    max-width: 280px;
    opacity: 0.08;
  }
}

/* ---------- Updates pill (optional) ---------- */
.invaders .updates {
  margin-top: 15px;
  max-width: 400px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.04),
    rgba(255, 255, 255, 0.02)
  );
  font-size: 13px;
  color: #cfd6e6;
  display: inline-flex;
  gap: 10px;
  flex-wrap: wrap;
}

/* =========================================================
   Layout: canvas centered + scores on the right
   (uses negative margin on the container so footer sits right)
   ========================================================= */
.invaders .game-layout {
  display: grid;
  grid-template-columns: max-content 180px; /* left fits canvas, right slim */
  gap: 10px; /* tight gap (kept close) */
  align-items: start;
  width: fit-content; /* grid shrinks to its content */
  margin-inline: auto; /* center the whole block */
  margin-top: -600px; /* desktop placement you liked */
}

/* Left column: game area centered + starfield wrapper */
.invaders .game-area {
  position: relative; /* starfield layers anchor */
  isolation: isolate; /* keep ::before/::after behind the canvas */
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Canvas styling */
.invaders #game {
  display: block;
  width: min(95vw, 800px);
  height: min(80vh, 600px);
  margin: 0;
  border: 2px solid #7a0000;
  border-radius: 12px;
  background: radial-gradient(
    1200px 600px at 50% -200px,
    #141b2f 0,
    #0b0f1a 50%,
    #070a12 100%
  );
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), inset 0 0 40px #0a0f1f;
}

/* ---------- Starfield (behind canvas) ---------- */
.invaders .game-area::before,
.invaders .game-area::after {
  content: '';
  position: absolute;
  inset: -60px;
  z-index: -1; /* ensure behind canvas/HUD */
  background-repeat: repeat;
  background-size: 240px 240px;
  opacity: 0.25;
  pointer-events: none;
  filter: blur(0.2px);
}
.invaders .game-area::before {
  background-image: radial-gradient(
      2px 2px at 20% 30%,
      #7ecbff 40%,
      transparent 41%
    ),
    radial-gradient(1px 1px at 70% 60%, #ffd0ff 40%, transparent 41%),
    radial-gradient(1.8px 1.8px at 40% 80%, #b5ffea 40%, transparent 41%);
  animation: starDrift 60s linear infinite;
}
.invaders .game-area::after {
  background-image: radial-gradient(
      1.6px 1.6px at 10% 70%,
      #bfe3ff 40%,
      transparent 41%
    ),
    radial-gradient(1.4px 1.4px at 80% 35%, #ffe3bf 40%, transparent 41%),
    radial-gradient(0.8px 0.8px at 55% 20%, #c8bfff 40%, transparent 41%);
  animation: starDrift2 90s linear infinite reverse;
  opacity: 0.2;
}
@keyframes starDrift {
  from {
    background-position: 0 0;
  }
  to {
    background-position: 240px 240px;
  }
}
@keyframes starDrift2 {
  from {
    background-position: 0 0;
  }
  to {
    background-position: -240px 160px;
  }
}

/* ---------- HUD under canvas ---------- */
.invaders .hud {
  margin-top: 12px;
  font-size: 14px;
  opacity: 0.9;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  justify-content: center;
}
.invaders .panel {
  display: grid;
  gap: 0.35rem;
  align-items: center;
}

/* Input contrast — light field with dark text (keeps your black text choice) */
.invaders .name {
  color: #000;
  background: #f2f5ff;
  border: 1px solid #243355;
  border-radius: 10px;
  padding: 0.55rem 0.7rem;
  outline: none;
  min-width: 220px;
}

/* ---------- Right column: High scores ---------- */
.invaders .scores {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: #0e1526;
  border: 1px solid #243355;
  border-radius: 12px;
  max-width: 180px; /* narrow, as requested */
  max-height: 520px; /* aligns visually with canvas height */
  overflow-y: auto;
}
.invaders .scores h4 {
  margin: 0 0 0.4rem 0;
  font-size: 16px;
  opacity: 0.9;
}
.invaders .scores ol {
  margin: 0;
  padding-left: 1.2rem;
  font-size: 14px;
}

/* pulse when scores update */
.invaders .scores--pulse {
  animation: scorePulse 0.6s ease;
  box-shadow: 0 0 0 2px rgba(124, 92, 255, 0.25),
    0 8px 24px rgba(124, 92, 255, 0.25);
}
@keyframes scorePulse {
  0% {
    transform: scale(1);
  }
  35% {
    transform: scale(1.03);
  }
  100% {
    transform: scale(1);
  }
}

/* =========================================================
   Mobile controls
   ========================================================= */
.invaders .mobile-controls {
  position: fixed;
  inset: auto 0 16px 0;
  display: none;
  gap: 14px;
  justify-content: center;
  align-items: center;
}
.invaders .mc-btn {
  font: 700 22px system-ui, sans-serif;
  width: 68px;
  height: 68px;
  border-radius: 16px;
  border: 1px solid #243355;
  background: #0e1526;
  color: #e6e6e6;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
  touch-action: none; /* prevents scrolling while holding */
}
.invaders .mc-btn--fire {
  width: 84px;
  height: 84px;
  border: 2px solid #1b9fff;
}
@media (pointer: coarse) {
  .invaders .mobile-controls {
    display: flex;
  }
}

/* =========================================================
   Responsive — width-based
   (progressively relax the -600px lift on smaller screens)
   ========================================================= */

/* Large desktops (wider than 1400px): keep your -600px default */

/* 1200–1399px: ease the lift slightly */
@media (max-width: 1399px) {
  .invaders .game-layout {
    margin-top: -520px;
  }
}

/* 900–1199px: reduce more, keep two columns */
@media (max-width: 1199px) {
  .invaders .game-layout {
    margin-top: -380px;
    grid-template-columns: max-content 160px; /* slimmer scores column */
  }
  .invaders .scores {
    max-width: 160px;
  }
}

/* Up to 900px: stack vertically (game above scores) */
@media (max-width: 900px) {
  .invaders .game-layout {
    grid-template-columns: 1fr;
    width: 100%;
    justify-items: center; /* keep canvas centered */
    margin-top: -240px; /* smaller lift for compact view */
  }
  .invaders .scores {
    max-height: none;
    margin-top: 16px;
    max-width: 240px; /* allow a bit wider on mobile if you prefer */
  }
}

/* Phones: gentle lift + comfortable sizing */
@media (max-width: 600px) {
  .invaders .game-layout {
    margin-top: -140px;
  }
  .invaders #game {
    width: min(96vw, 700px);
    height: min(72vh, 520px);
  }
}

/* Very small phones */
@media (max-width: 400px) {
  .invaders .game-layout {
    margin-top: -90px;
  }
  .invaders #game {
    width: min(97vw, 640px);
    height: min(68vh, 480px);
  }
}

/* =========================================================
   Optional: height-based safety
   (if viewport height is very short, ease the lift)
   ========================================================= */
@media (max-height: 800px) and (min-width: 901px) {
  .invaders .game-layout {
    margin-top: -420px;
  }
}
@media (max-height: 700px) and (min-width: 901px) {
  .invaders .game-layout {
    margin-top: -320px;
  }
}
